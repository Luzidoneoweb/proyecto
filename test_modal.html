<!DOCTYPE html>

<html lang="es">

<head> 

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Prueba de Modal de Autenticaci√≥n</title>

    <link rel="stylesheet" href="css/modal.css">

    <style>

        body {

            font-family: sans-serif;

            display: flex;

            justify-content: center;

            align-items: center;

            min-height: 100vh;

            margin: 0;

            background-color: #f0f2f5;

        }

        .container {

            text-align: center;

        }

        #botonLogin {

            padding: 10px 20px;

            font-size: 1rem;

            cursor: pointer;

            background-color: #059669;

            color: white;

            border: none;

            border-radius: 8px;

            transition: background-color 0.2s ease;

        }

        #botonLogin:hover {

            background-color: #047857;

        }

        /* Estilos para el campo de contrase√±a con ojo */

        .field-password {

            position: relative;

        }

        .field-password input {

            padding-right: 10px; /* Espacio m√≠nimo para el texto */

        }

        .field-password .toggle-password {

            position: absolute;

            right: 10px;

            top: 50%; /* Centrar verticalmente con el input */

            transform: translateY(-50%);

            cursor: pointer;

            color: #6b7280;

            font-size: 1.2rem;

            line-height: 1;

        }

        .field-password .toggle-password:hover {

            color: #374151;

        }

        .forgot-password {

            display: block;

            text-align: right;

            margin-top: 0.5rem;

            font-size: 0.875rem;

            color: #059669;

            text-decoration: none;

        }

        .forgot-password:hover {

            text-decoration: underline;

        }

    </style>

</head>

<body>

    <div class="container">

        <h1>Bienvenido a la Prueba del Modal</h1>

        <button id="botonLogin">Abrir Modal de Autenticaci√≥n (HTML)</button>
        <button id="botonCargarModalPHP">Cargar Modal de Autenticaci√≥n (PHP)</button>

    </div>



    <div id="modalContainer"></div>

    <script src="js/login_registos/auth_auntentif.js"></script>
    <script>
        // Para la prueba, simulamos la funci√≥n verificarEstadoSesion si no est√° en global.js
        if (typeof verificarEstadoSesion === 'undefined') {
            window.verificarEstadoSesion = function() {
                console.log('Simulando verificarEstadoSesion para la prueba del modal.');
            };
        }

        // Funcionalidad para mostrar/ocultar contrase√±a
        document.querySelectorAll('.toggle-password').forEach(toggle => {
            toggle.addEventListener('click', function() {
                const input = this.previousElementSibling; // El input de contrase√±a es el hermano anterior
                if (input.type === 'password') {
                    input.type = 'text';
                    this.textContent = 'üôà'; // Cambiar a icono de ojo tachado
                } else {
                    input.type = 'password';
                    this.textContent = 'üëÅÔ∏è'; // Cambiar a icono de ojo
                }
            });
        });

        // L√≥gica para cargar el modal desde PHP
        document.getElementById('botonCargarModalPHP').addEventListener('click', async () => {
            try {
                const response = await fetch('php/login_seguridad/modal_login.php');
                const modalHTML = await response.text();
                document.getElementById('modalContainer').innerHTML = modalHTML;
                
                // Inicializar la funcionalidad del modal despu√©s de cargarlo
                inicializarModalPHP();
            } catch (error) {
                console.error('Error al cargar el modal desde PHP:', error);
            }
        });

        function inicializarModalPHP() {
            const authModal = document.getElementById('authModal');
            const authClose = document.getElementById('authClose');
            const authBackdrop = document.getElementById('authBackdrop');
            const authTabs = document.querySelectorAll('.auth-tab');
            const passwordToggles = document.querySelectorAll('.toggle-password');

            if (authModal) {
                authModal.classList.add('is-open'); // Mostrar el modal

                authClose.addEventListener('click', () => {
                    authModal.classList.remove('is-open');
                    document.getElementById('modalContainer').innerHTML = ''; // Limpiar el contenido del modal
                });

                authBackdrop.addEventListener('click', () => {
                    authModal.classList.remove('is-open');
                    document.getElementById('modalContainer').innerHTML = ''; // Limpiar el contenido del modal
                });

                authTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        authTabs.forEach(t => t.classList.remove('active'));
                        this.classList.add('active');
                        const viewId = this.dataset.view;
                        document.querySelectorAll('.auth-view').forEach(view => {
                            view.style.display = 'none';
                        });
                        document.getElementById(viewId).style.display = 'block';
                    });
                });

                passwordToggles.forEach(toggle => {
                    toggle.addEventListener('click', function() {
                        const input = this.previousElementSibling;
                        if (input.type === 'password') {
                            input.type = 'text';
                            this.textContent = 'üôà';
                        } else {
                            input.type = 'password';
                            this.textContent = 'üëÅÔ∏è';
                        }
                    });
                });
            }
        }

    </script>

</body>

</html>
